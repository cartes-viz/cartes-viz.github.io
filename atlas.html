<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atlas &mdash; Cartes 0.8.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
      <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Fira Sans|Ubuntu:regular,bold&subset=Latin&display=swap" />
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto Sans JP:thin,regular,bold&display=swap" />
      <link rel="stylesheet" type="text/css" href="_static/main_stylesheet.css?v=ee88ba8d" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=486e5634"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/thebelab-helper.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager/dist/embed-amd.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="OpenStreetMap" href="osm.html" />
    <link rel="prev" title="CRS and projections" href="projections.html" /> 
</head>

<body class="wy-body-for-nav">
<!-- force the fonts to be put in cache in advance -->
<div id="ubuntu">Ubuntu <b>bold</b></div>
<div id="fontin">Fontin Sans <b>bold</b></div>
<div id="notojp">東京都</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Cartes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="projections.html">CRS and projections</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Atlas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filtering-the-atlas-collection">Filtering the atlas collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-maps">Simple maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tricks-for-filtering">Tricks for filtering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="osm.html">OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualisation.html">Data visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Example gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="alternatives.html">Alternative libraries</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cartes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Atlas</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/atlas.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="atlas">
<h1>Atlas<a class="headerlink" href="#atlas" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>Cartes comes with a facilitated access to repositories of topojson files online.
topojson is a very lightweight format compared to geojson, so it is excellent
for transferring files over the Internet, and for a direct integration in
Altair.</p>
<p>Currently we have two major repositories for maps:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 50.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>repository</p></th>
<th class="head"><p>type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></td>
<td><p><a class="reference external" href="https://github.com/deldersveld/topojson">https://github.com/deldersveld/topojson</a></p></td>
<td><p>Github</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">world_atlas</span></code></p></td>
<td><p><a class="reference external" href="https://cdn.jsdelivr.net/npm/world-atlas&#64;2/">https://cdn.jsdelivr.net/npm/world-atlas&#64;2/</a></p></td>
<td><p>npm</p></td>
</tr>
</tbody>
</table>
<p>The list of maps available in each repository is available with each module:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartes.atlas</span> <span class="kn">import</span> <span class="n">default</span>

<span class="n">default</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>download_url</th>
      <th>type</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>USARegion.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>856363</td>
    </tr>
    <tr>
      <th>6</th>
      <td>world-continents.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>72125</td>
    </tr>
    <tr>
      <th>7</th>
      <td>world-countries-sans-antarctica.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>109244</td>
    </tr>
    <tr>
      <th>8</th>
      <td>world-countries.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>115340</td>
    </tr>
    <tr>
      <th>9</th>
      <td>continents/africa.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>17730</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>179</th>
      <td>countries/us-states/WA-53-washington-counties....</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>15542</td>
    </tr>
    <tr>
      <th>180</th>
      <td>countries/us-states/WI-55-wisconsin-counties.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>25029</td>
    </tr>
    <tr>
      <th>181</th>
      <td>countries/us-states/WV-54-west-virginia-counti...</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>19663</td>
    </tr>
    <tr>
      <th>182</th>
      <td>countries/us-states/WY-56-wyoming-counties.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>8682</td>
    </tr>
    <tr>
      <th>183</th>
      <td>countries/venezuela/venezuela-estados.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>84347</td>
    </tr>
  </tbody>
</table>
<p>136 rows × 4 columns</p>
</div></div></div>
</div>
</section>
<section id="filtering-the-atlas-collection">
<h2>Filtering the atlas collection<a class="headerlink" href="#filtering-the-atlas-collection" title="Link to this heading"></a></h2>
<p>You can filter the table with regular accessors:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">default</span><span class="o">.</span><span class="n">europe</span>  <span class="c1"># equivalent to from cartes.atlas import europe</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>download_url</th>
      <th>type</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>12</th>
      <td>continents/europe.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>26510</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>When only one element is left, you can access:</p>
<ul>
<li><div class="line-block">
<div class="line">a <code class="docutils literal notranslate"><span class="pre">topo_feature</span></code> element, for a direct access in Altair.</div>
<div class="line">Here, data is not included in the Altair JSON, only a link to the url.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">a <code class="docutils literal notranslate"><span class="pre">data</span></code> element for the corresponding Geopandas dataframe.</div>
<div class="line">This option is comfortable for exploring data, or for further postprocessing.</div>
</div>
</li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>

<span class="kn">from</span> <span class="nn">cartes.atlas</span> <span class="kn">import</span> <span class="n">europe</span>
<span class="kn">from</span> <span class="nn">cartes.crs</span> <span class="kn">import</span> <span class="n">EuroPP</span>

<span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">europe</span><span class="o">.</span><span class="n">topo_feature</span><span class="p">)</span>
    <span class="o">.</span><span class="n">mark_geoshape</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="o">**</span><span class="n">EuroPP</span><span class="p">())</span>
    <span class="o">.</span><span class="n">configure_view</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-9b6f373a0b974bad96b0e8e335111fb2.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-9b6f373a0b974bad96b0e8e335111fb2.vega-embed details,
  #altair-viz-9b6f373a0b974bad96b0e8e335111fb2.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-9b6f373a0b974bad96b0e8e335111fb2"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-9b6f373a0b974bad96b0e8e335111fb2") {
      outputDiv = document.getElementById("altair-viz-9b6f373a0b974bad96b0e8e335111fb2");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"url": "https://raw.githubusercontent.com/xoolive/topojson/master/continents/europe.json", "format": {"feature": "continent_Europe_subunits", "type": "topojson"}}, "mark": {"type": "geoshape", "stroke": "white"}, "height": 400, "projection": {"rotate": [-9, 0, 0], "type": "transverseMercator"}, "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.17.0.json"}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>Corresponding data is available, and stored in cache:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">europe</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>type</th>
      <th>geounit</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>None</td>
      <td>Sovereigncountry</td>
      <td>Albania</td>
      <td>POLYGON ((20.0662 42.5463, 20.50071 42.20947, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>None</td>
      <td>Sovereigncountry</td>
      <td>Andorra</td>
      <td>POLYGON EMPTY</td>
    </tr>
    <tr>
      <th>2</th>
      <td>None</td>
      <td>Sovereigncountry</td>
      <td>Austria</td>
      <td>POLYGON ((16.94629 48.60554, 16.84656 48.35953...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>None</td>
      <td>Geounit</td>
      <td>FlemishRegion</td>
      <td>POLYGON ((5.65617 50.80821, 5.42823 50.72116, ...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>None</td>
      <td>Sovereigncountry</td>
      <td>Bulgaria</td>
      <td>POLYGON ((28.57831 43.74225, 28.45721 43.37893...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It is possible to chain filtering:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartes.atlas</span> <span class="kn">import</span> <span class="n">japan</span>  <span class="c1"># or from cartes.atlas.default import japan</span>

<span class="n">japan</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>download_url</th>
      <th>type</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>82</th>
      <td>countries/japan/jp-prefectures.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>127013</td>
    </tr>
    <tr>
      <th>83</th>
      <td>countries/japan/jp-towns.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>686798</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">japan</span><span class="o">.</span><span class="n">towns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>download_url</th>
      <th>type</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>83</th>
      <td>countries/japan/jp-towns.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>686798</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="simple-maps">
<h2>Simple maps<a class="headerlink" href="#simple-maps" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute is convenient to explore data and create a first visualisation:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">japan</span><span class="o">.</span><span class="n">towns</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;NAME_1 == &quot;Shiga&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">15</span><span class="p">,</span> <span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>ISO</th>
      <th>NAME_0</th>
      <th>ID_1</th>
      <th>NAME_1</th>
      <th>ID_2</th>
      <th>NAME_2</th>
      <th>VARNAME_2</th>
      <th>HASC_2</th>
      <th>TYPE_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1471</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18424</td>
      <td>Aisho</td>
      <td></td>
      <td></td>
      <td>Machi</td>
    </tr>
    <tr>
      <th>1472</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18425</td>
      <td>Azuchi</td>
      <td></td>
      <td></td>
      <td>Machi</td>
    </tr>
    <tr>
      <th>1473</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18426</td>
      <td>Higashiomi</td>
      <td></td>
      <td></td>
      <td>Shi</td>
    </tr>
    <tr>
      <th>1474</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18427</td>
      <td>Hikone</td>
      <td></td>
      <td>JP.SH.HK</td>
      <td>Shi</td>
    </tr>
    <tr>
      <th>1475</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18428</td>
      <td>Hino</td>
      <td></td>
      <td></td>
      <td>Machi</td>
    </tr>
    <tr>
      <th>1476</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18429</td>
      <td>Kinomoto</td>
      <td></td>
      <td></td>
      <td>Machi</td>
    </tr>
    <tr>
      <th>1477</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18430</td>
      <td>Kohoku</td>
      <td></td>
      <td></td>
      <td>Machi</td>
    </tr>
    <tr>
      <th>1478</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18431</td>
      <td>Koka</td>
      <td></td>
      <td></td>
      <td>Shi</td>
    </tr>
    <tr>
      <th>1479</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18432</td>
      <td>Konan</td>
      <td></td>
      <td></td>
      <td>Shi</td>
    </tr>
    <tr>
      <th>1480</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18433</td>
      <td>Kora</td>
      <td></td>
      <td></td>
      <td>Machi</td>
    </tr>
    <tr>
      <th>1481</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18434</td>
      <td>Kusatsu</td>
      <td></td>
      <td>JP.SH.KS</td>
      <td>Shi</td>
    </tr>
    <tr>
      <th>1482</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18435</td>
      <td>Lake Biwa</td>
      <td></td>
      <td></td>
      <td>Water body</td>
    </tr>
    <tr>
      <th>1483</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18436</td>
      <td>Maibara</td>
      <td></td>
      <td></td>
      <td>Shi</td>
    </tr>
    <tr>
      <th>1484</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18437</td>
      <td>Moriyama</td>
      <td></td>
      <td>JP.SH.MR</td>
      <td>Shi</td>
    </tr>
    <tr>
      <th>1485</th>
      <td>None</td>
      <td>JPN</td>
      <td>Japan</td>
      <td>1492</td>
      <td>Shiga</td>
      <td>18438</td>
      <td>Nagahama</td>
      <td></td>
      <td>JP.SH.NG</td>
      <td>Shi</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartes.crs</span> <span class="kn">import</span> <span class="n">JGD2000</span>

<span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">japan</span><span class="o">.</span><span class="n">towns</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;NAME_1 == &quot;Shiga&quot;&#39;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">mark_geoshape</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span>
            <span class="s2">&quot;datum.ENGTYPE_2 == &#39;Water body&#39;&quot;</span><span class="p">,</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;steelblue&quot;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;#bab0ac&quot;</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;NAME_2&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="o">**</span><span class="n">JGD2000</span><span class="p">())</span>
    <span class="o">.</span><span class="n">configure_view</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-86f1a3b750c34252be374696ef1e9e12.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-86f1a3b750c34252be374696ef1e9e12.vega-embed details,
  #altair-viz-86f1a3b750c34252be374696ef1e9e12.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-86f1a3b750c34252be374696ef1e9e12"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-86f1a3b750c34252be374696ef1e9e12") {
      outputDiv = document.getElementById("altair-viz-86f1a3b750c34252be374696ef1e9e12");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"name": "data-55c6e83c85318b6b0190c5d3cd0433fc"}, "mark": {"type": "geoshape", "stroke": "white"}, "encoding": {"color": {"condition": {"test": "datum.ENGTYPE_2 == 'Water body'", "value": "steelblue"}, "value": "#bab0ac"}, "tooltip": {"field": "NAME_2", "type": "nominal"}}, "height": 400, "projection": {"rotate": [-139.833333333333, -36, 0], "type": "transverseMercator"}, "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.17.0.json", "datasets": {"data-55c6e83c85318b6b0190c5d3cd0433fc": [{"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18424, "NAME_2": "Aisho", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.25955866215594, 35.18620231782242], [136.29364080666045, 35.17940871938739], [136.30183777812354, 35.161173270956525], [136.3376456008308, 35.14401049596277], [136.31434894509354, 35.15116165221016], [136.27552118553146, 35.150088978773056], [136.23712484552007, 35.15688257720809], [136.22935929360767, 35.13936224440196], [136.21382818978282, 35.13507155065352], [136.19139437314695, 35.1876325490719], [136.21167109202938, 35.19549882094404], [136.22159374169524, 35.18441452876057], [136.25955866215594, 35.18620231782242]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18425, "NAME_2": "Azuchi", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.16248926325073, 35.1078971569134], [136.13789834886143, 35.121126795971094], [136.1094246585159, 35.155094788146236], [136.11201317582004, 35.1697546584534], [136.13228989470247, 35.17046977407814], [136.1849230798866, 35.124702374094795], [136.16248926325073, 35.1078971569134]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18426, "NAME_2": "Higashiomi", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.19139437314695, 35.1876325490719], [136.21382818978282, 35.13507155065352], [136.22935929360767, 35.13936224440196], [136.23712484552007, 35.15688257720809], [136.27552118553146, 35.150088978773056], [136.31434894509354, 35.15116165221016], [136.3376456008308, 35.14401049596277], [136.36094225656805, 35.12827795221849], [136.3881216882615, 35.140434917839066], [136.37690477994357, 35.166179080329705], [136.37819903859565, 35.18083895063687], [136.3967500792753, 35.19442614750693], [136.41875247636048, 35.18620231782242], [136.45714881637187, 35.159743039707045], [136.43859777569222, 35.12792039440612], [136.4480890058074, 35.122914585032945], [136.43989203434427, 35.07428672255063], [136.44377481030048, 35.06677800849086], [136.42090957411392, 35.04460942412393], [136.42134099366461, 35.01207166319826], [136.3932987228698, 35.01671991475907], [136.34497973319253, 35.014217010072485], [136.33376282487458, 35.03245245850335], [136.30615197363045, 35.05140302255896], [136.2660299554163, 35.055693716307395], [136.25438162754767, 35.06499021942901], [136.22245658079663, 35.05283325380843], [136.22590793720215, 35.03567047881468], [136.18276598213316, 35.01528968350959], [136.16550920010556, 35.02601641788069], [136.14911525717935, 35.055693716307395], [136.148252418078, 35.071426260051666], [136.1340155729052, 35.095740191292826], [136.16248926325073, 35.1078971569134], [136.1849230798866, 35.124702374094795], [136.13228989470247, 35.17046977407814], [136.11201317582004, 35.1697546584534], [136.10122768705278, 35.198359283443], [136.12323008413796, 35.215879616249126], [136.16982339561247, 35.201219745941955], [136.19139437314695, 35.1876325490719]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18427, "NAME_2": "Hikone", "VARNAME_2": "", "HASC_2": "JP.SH.HK", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.35705948061184, 35.27237375060358], [136.3121918473401, 35.2566412068593], [136.30097493902215, 35.24341156780161], [136.26430427721354, 35.22624879280785], [136.24359613878042, 35.207298228752244], [136.22849645450628, 35.21301915375017], [136.21167109202938, 35.19549882094404], [136.19139437314695, 35.1876325490719], [136.16982339561247, 35.201219745941955], [136.12323008413796, 35.215879616249126], [136.1422125443683, 35.217309847498605], [136.1719804933659, 35.23590285374184], [136.2319478109118, 35.266652825605654], [136.26085292080802, 35.29740279746947], [136.30183777812354, 35.29847547090658], [136.31823172104976, 35.28310048497467], [136.3367827617294, 35.29132431465918], [136.35705948061184, 35.27237375060358]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18428, "NAME_2": "Hino", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.34497973319253, 35.014217010072485], [136.3423912158884, 34.98418215383341], [136.3130546864415, 34.98060657570971], [136.27724686373423, 34.95736531790566], [136.25049885159146, 34.95271706634485], [136.23583058686802, 34.959510664779884], [136.22029948304316, 34.981679249146815], [136.18794301674143, 34.999199581952944], [136.18276598213316, 35.01528968350959], [136.22590793720215, 35.03567047881468], [136.22245658079663, 35.05283325380843], [136.25438162754767, 35.06499021942901], [136.2660299554163, 35.055693716307395], [136.30615197363045, 35.05140302255896], [136.33376282487458, 35.03245245850335], [136.34497973319253, 35.014217010072485]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18429, "NAME_2": "Kinomoto", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.32384017520872, 35.54769326612842], [136.28501241564663, 35.532675838008885], [136.2867380938494, 35.49513226771005], [136.2742269268794, 35.48762355365027], [136.2487731733887, 35.49978051927086], [136.23539916731733, 35.48905378489975], [136.2146910288842, 35.49191424739871], [136.19915992505938, 35.483332859901836], [136.17629468887282, 35.50299853958218], [136.18664875808938, 35.50836190676773], [136.21641670708698, 35.51301015832854], [136.24618465608455, 35.545905477066576], [136.2453218169832, 35.56950429268299], [136.2655985358656, 35.59739380204785], [136.29234654800837, 35.61705948172819], [136.31564320374562, 35.61991994422715], [136.3255658534115, 35.57343742861906], [136.32384017520872, 35.54769326612842]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18430, "NAME_2": "Kohoku", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.2828553178932, 35.446504405227735], [136.2526559493449, 35.43935324898033], [136.24834175383802, 35.4243358208608], [136.22073090259386, 35.42969918804634], [136.2021798619142, 35.42290558961132], [136.19225721224834, 35.44114103804218], [136.20433695966764, 35.45258288803802], [136.24273329967903, 35.45651602397409], [136.2742269268794, 35.48762355365027], [136.28846377205215, 35.47618170365443], [136.2828553178932, 35.446504405227735]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18431, "NAME_2": "Koka", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.18276598213316, 35.01528968350959], [136.18794301674143, 34.999199581952944], [136.22029948304316, 34.981679249146815], [136.23583058686802, 34.959510664779884], [136.25049885159146, 34.95271706634485], [136.27724686373423, 34.95736531790566], [136.3130546864415, 34.98060657570971], [136.3423912158884, 34.98418215383341], [136.34497973319253, 35.014217010072485], [136.3932987228698, 35.01671991475907], [136.42134099366461, 35.01207166319826], [136.42047815456323, 34.992763541330284], [136.41443828085357, 34.97631588196127], [136.4053784702891, 34.96272868509121], [136.379061877697, 34.94127521634901], [136.3682763889298, 34.90265897261306], [136.32340875565802, 34.88656887105641], [136.3074462322825, 34.87190900074925], [136.28846377205215, 34.86869098043792], [136.25006743204077, 34.855461341380234], [136.19872850550868, 34.86904853825029], [136.18233456258247, 34.88335085074509], [136.14997809628073, 34.87977527262139], [136.11891588863108, 34.889071775743005], [136.09001077873486, 34.882278177307974], [136.10338478480622, 34.86726074918844], [136.1292699578476, 34.85903691950393], [136.09001077873486, 34.832935199200925], [136.09346213514038, 34.81148173045873], [136.06585128389622, 34.797536975776296], [136.02529784613137, 34.78824047265468], [136.01796371376966, 34.80540324764844], [136.03004346118897, 34.815057308582425], [136.01278667916137, 34.82256602264219], [135.99984409264067, 34.84115902888543], [135.97956737375827, 34.83508054607515], [135.9644676894841, 34.85081308981942], [135.9476423270072, 34.85260087888127], [135.94591664880446, 34.870836327312134], [135.9899214429748, 34.88370840855745], [135.9989812535393, 34.90265897261306], [136.01710087466827, 34.91231303354705], [136.0455745650138, 34.91553105385838], [136.05161443872345, 34.94699614134693], [136.07145973805518, 34.9616560116541], [136.11244459537073, 34.94270544759849], [136.1353098315573, 34.95736531790566], [136.1292699578476, 34.98596994289525], [136.15127235493281, 35.02172572413225], [136.16550920010556, 35.02601641788069], [136.18276598213316, 35.01528968350959]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18432, "NAME_2": "Konan", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.15127235493281, 35.02172572413225], [136.1292699578476, 34.98596994289525], [136.1353098315573, 34.95736531790566], [136.11244459537073, 34.94270544759849], [136.07145973805518, 34.9616560116541], [136.05204585827414, 34.98382459602104], [136.04212320860827, 35.01385945226011], [136.04643740411518, 35.02458618663121], [136.0796567095183, 35.04854256005999], [136.10381620435692, 35.02065305069514], [136.130132796949, 35.03173734287861], [136.15127235493281, 35.02172572413225]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18433, "NAME_2": "Kora", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.25955866215594, 35.18620231782242], [136.24359613878042, 35.207298228752244], [136.26430427721354, 35.22624879280785], [136.2949350653125, 35.19156568500797], [136.29364080666045, 35.17940871938739], [136.25955866215594, 35.18620231782242]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18434, "NAME_2": "Kusatsu", "VARNAME_2": "", "HASC_2": "JP.SH.KS", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[135.99207854072827, 34.9759583241489], [135.94332813150032, 34.980249017897336], [135.91312876295203, 34.99061819445606], [135.91140308474928, 35.03030711162913], [135.94462239015238, 35.06606289286612], [135.96403626993342, 35.047827444435256], [135.96274201128136, 35.033167574128086], [135.97870453465688, 35.00527806476323], [136.00113835129275, 34.988472847581846], [135.99207854072827, 34.9759583241489]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18435, "NAME_2": "Lake Biwa", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Water body", "ENGTYPE_2": "Water body", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.2021798619142, 35.42290558961132], [136.22159374169524, 35.38893759743617], [136.25395020799698, 35.38357423025062], [136.27552118553146, 35.37141726463005], [136.2815610592411, 35.34924868026311], [136.26085292080802, 35.29740279746947], [136.2319478109118, 35.266652825605654], [136.1719804933659, 35.23590285374184], [136.1422125443683, 35.217309847498605], [136.12323008413796, 35.215879616249126], [136.10122768705278, 35.198359283443], [136.07793103131553, 35.18584476001005], [136.06412560569348, 35.165821522517334], [136.07706819221417, 35.15545234595861], [136.11201317582004, 35.1697546584534], [136.1094246585159, 35.155094788146236], [136.08310806592382, 35.15724013502046], [136.0628313470414, 35.13793201315248], [136.0326319784931, 35.14258026471329], [136.0240035874793, 35.135429108465885], [135.99380421893102, 35.140077360026694], [135.9817244715117, 35.11612098659791], [135.9485051661086, 35.11290296628658], [135.95497645936894, 35.0710687022393], [135.94462239015238, 35.06606289286612], [135.91140308474928, 35.03030711162913], [135.91312876295203, 34.99061819445606], [135.89242062451893, 34.99061819445606], [135.86998680788304, 35.00813852726219], [135.8721439056365, 35.033167574128086], [135.9092459869958, 35.09824309597941], [135.9277970276755, 35.10396402097734], [135.93642541868928, 35.155094788146236], [135.92132573441515, 35.17511802563895], [135.9217571539658, 35.19263835844508], [135.9644676894841, 35.224103445933636], [135.96705620678824, 35.24090866311502], [135.98949002342414, 35.25807143810878], [136.02314074837793, 35.2755917709149], [136.02443500703, 35.29311210372103], [136.08310806592382, 35.318141150586925], [136.0710283185045, 35.351751584949696], [136.04126036950692, 35.385362019312474], [136.04859450186862, 35.40717304586704], [136.0460059845645, 35.433274766170044], [136.0667141229976, 35.44578928960299], [136.10640472166108, 35.45329800366276], [136.1171902104283, 35.48047239740288], [136.1353098315573, 35.48047239740288], [136.15299803313556, 35.467242758345186], [136.17629468887282, 35.50299853958218], [136.19915992505938, 35.483332859901836], [136.20433695966764, 35.45258288803802], [136.19225721224834, 35.44114103804218], [136.2021798619142, 35.42290558961132]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18436, "NAME_2": "Maibara", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.44463764940187, 35.387507366186696], [136.41702679815774, 35.36855680213109], [136.42392951096875, 35.35067891151259], [136.41530111995496, 35.31277778340137], [136.4045156311877, 35.29668768184473], [136.39933859657944, 35.29168187247155], [136.35705948061184, 35.27237375060358], [136.3367827617294, 35.29132431465918], [136.31823172104976, 35.28310048497467], [136.30183777812354, 35.29847547090658], [136.26085292080802, 35.29740279746947], [136.2815610592411, 35.34924868026311], [136.29622932396458, 35.35282425838681], [136.32384017520872, 35.34424287088993], [136.34325405498976, 35.403239909930974], [136.36007941746666, 35.42004512711236], [136.33505708352666, 35.48690843802554], [136.34411689409114, 35.504071213019294], [136.34627399184458, 35.534106069258364], [136.3842389123053, 35.53517874269548], [136.4049470507384, 35.5158706208275], [136.39114162511635, 35.49048401614923], [136.40278995298496, 35.47224856771837], [136.4230666718674, 35.46366718022149], [136.42608660872222, 35.441498595854554], [136.4183210568098, 35.42183291617421], [136.42867512602635, 35.3993067739949], [136.44463764940187, 35.387507366186696]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18437, "NAME_2": "Moriyama", "VARNAME_2": "", "HASC_2": "JP.SH.MR", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[135.9817244715117, 35.11612098659791], [135.9950984775831, 35.111472735037104], [136.0162380355669, 35.0853710147341], [136.0067468054517, 35.058911736618725], [136.0158066160162, 35.04854256005999], [135.98431298881584, 35.034597805377565], [135.96403626993342, 35.047827444435256], [135.94462239015238, 35.06606289286612], [135.95497645936894, 35.0710687022393], [135.9485051661086, 35.11290296628658], [135.9817244715117, 35.11612098659791]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18438, "NAME_2": "Nagahama", "VARNAME_2": "", "HASC_2": "JP.SH.NG", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.34627399184458, 35.534106069258364], [136.34411689409114, 35.504071213019294], [136.33505708352666, 35.48690843802554], [136.36007941746666, 35.42004512711236], [136.34325405498976, 35.403239909930974], [136.32384017520872, 35.34424287088993], [136.29622932396458, 35.35282425838681], [136.2815610592411, 35.34924868026311], [136.27552118553146, 35.37141726463005], [136.25395020799698, 35.38357423025062], [136.22159374169524, 35.38893759743617], [136.2021798619142, 35.42290558961132], [136.22073090259386, 35.42969918804634], [136.24834175383802, 35.4243358208608], [136.26344143811215, 35.40788816149178], [136.2910522893563, 35.41646954898866], [136.2781097028356, 35.430414303671085], [136.2828553178932, 35.446504405227735], [136.28846377205215, 35.47618170365443], [136.2742269268794, 35.48762355365027], [136.2867380938494, 35.49513226771005], [136.28501241564663, 35.532675838008885], [136.32384017520872, 35.54769326612842], [136.34627399184458, 35.534106069258364]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18439, "NAME_2": "Nishiazai", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.18664875808938, 35.50836190676773], [136.17629468887282, 35.50299853958218], [136.15299803313556, 35.467242758345186], [136.1353098315573, 35.48047239740288], [136.1171902104283, 35.48047239740288], [136.10640472166108, 35.45329800366276], [136.1003648479514, 35.46259450678438], [136.10640472166108, 35.528027586448076], [136.09863916974865, 35.53196072238415], [136.11071891716796, 35.548765939565534], [136.1167587908776, 35.57594033330565], [136.16723487830834, 35.56414092549744], [136.18664875808938, 35.50836190676773]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18440, "NAME_2": "Omihachiman", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "MultiPolygon", "coordinates": [[[[136.1094246585159, 35.155094788146236], [136.13789834886143, 35.121126795971094], [136.16248926325073, 35.1078971569134], [136.1340155729052, 35.095740191292826], [136.148252418078, 35.071426260051666], [136.11934730818177, 35.08644368817121], [136.08353948547452, 35.087516361608316], [136.06930264030174, 35.100030885041264], [136.04428030636174, 35.10753959910103], [136.0240035874793, 35.135429108465885], [136.0326319784931, 35.14258026471329], [136.0628313470414, 35.13793201315248], [136.08310806592382, 35.15724013502046], [136.1094246585159, 35.155094788146236]]], [[[136.11201317582004, 35.1697546584534], [136.07706819221417, 35.15545234595861], [136.06412560569348, 35.165821522517334], [136.07793103131553, 35.18584476001005], [136.10122768705278, 35.198359283443], [136.11201317582004, 35.1697546584534]]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18441, "NAME_2": "Otsu", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[135.98949002342414, 35.25807143810878], [135.96705620678824, 35.24090866311502], [135.9644676894841, 35.224103445933636], [135.9217571539658, 35.19263835844508], [135.92132573441515, 35.17511802563895], [135.93642541868928, 35.155094788146236], [135.9277970276755, 35.10396402097734], [135.9092459869958, 35.09824309597941], [135.8721439056365, 35.033167574128086], [135.86998680788304, 35.00813852726219], [135.89242062451893, 34.99061819445606], [135.91312876295203, 34.99061819445606], [135.94332813150032, 34.980249017897336], [135.99207854072827, 34.9759583241489], [136.01321809871206, 34.97274030383757], [136.0209836506245, 34.94413567884797], [136.05161443872345, 34.94699614134693], [136.0455745650138, 34.91553105385838], [136.01710087466827, 34.91231303354705], [135.9989812535393, 34.90265897261306], [135.9899214429748, 34.88370840855745], [135.94591664880446, 34.870836327312134], [135.93167980363168, 34.88478108199456], [135.90536321103963, 34.86940609606266], [135.86912396878168, 34.89300491167907], [135.881203716201, 34.933766502289245], [135.8669668710282, 34.95700776009329], [135.85876989956512, 34.97560076633653], [135.83633608292925, 34.99669667726636], [135.83719892203064, 35.018865261633294], [135.82123639865512, 35.045682097561034], [135.83892460023338, 35.05605127411977], [135.83935601978408, 35.089304150670166], [135.8548871236089, 35.12827795221849], [135.85661280181168, 35.148301189711205], [135.8432387957403, 35.1769058147008], [135.83245330697304, 35.21659473187386], [135.850572928102, 35.2673679412304], [135.85316144540616, 35.27737955997675], [135.8807722966503, 35.27952490685097], [135.91916863666168, 35.26093190060774], [135.94117103374685, 35.256998764671664], [135.9571335571224, 35.26772549904277], [135.98949002342414, 35.25807143810878]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18442, "NAME_2": "Ritto", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.04643740411518, 35.02458618663121], [136.04212320860827, 35.01385945226011], [136.05204585827414, 34.98382459602104], [136.07145973805518, 34.9616560116541], [136.05161443872345, 34.94699614134693], [136.0209836506245, 34.94413567884797], [136.01321809871206, 34.97274030383757], [135.99207854072827, 34.9759583241489], [136.00113835129275, 34.988472847581846], [135.97870453465688, 35.00527806476323], [135.96274201128136, 35.033167574128086], [135.96403626993342, 35.047827444435256], [135.98431298881584, 35.034597805377565], [136.0158066160162, 35.04854256005999], [136.04643740411518, 35.02458618663121]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18443, "NAME_2": "Ryuo", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.16550920010556, 35.02601641788069], [136.15127235493281, 35.02172572413225], [136.130132796949, 35.03173734287861], [136.10381620435692, 35.02065305069514], [136.0796567095183, 35.04854256005999], [136.08353948547452, 35.087516361608316], [136.11934730818177, 35.08644368817121], [136.148252418078, 35.071426260051666], [136.14911525717935, 35.055693716307395], [136.16550920010556, 35.02601641788069]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18444, "NAME_2": "Taga", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.4178896372591, 35.21480694281202], [136.41875247636048, 35.18620231782242], [136.3967500792753, 35.19442614750693], [136.37819903859565, 35.18083895063687], [136.37690477994357, 35.166179080329705], [136.3881216882615, 35.140434917839066], [136.36094225656805, 35.12827795221849], [136.3376456008308, 35.14401049596277], [136.30183777812354, 35.161173270956525], [136.29364080666045, 35.17940871938739], [136.2949350653125, 35.19156568500797], [136.26430427721354, 35.22624879280785], [136.30097493902215, 35.24341156780161], [136.3121918473401, 35.2566412068593], [136.35705948061184, 35.27237375060358], [136.39933859657944, 35.29168187247155], [136.39804433792736, 35.252350513110855], [136.38165039500115, 35.24376912561398], [136.4178896372591, 35.21480694281202]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18445, "NAME_2": "Takashima", "VARNAME_2": "", "HASC_2": "JP.SH.TK", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.10640472166108, 35.45329800366276], [136.0667141229976, 35.44578928960299], [136.0460059845645, 35.433274766170044], [136.04859450186862, 35.40717304586704], [136.04126036950692, 35.385362019312474], [136.0710283185045, 35.351751584949696], [136.08310806592382, 35.318141150586925], [136.02443500703, 35.29311210372103], [136.02314074837793, 35.2755917709149], [135.98949002342414, 35.25807143810878], [135.9571335571224, 35.26772549904277], [135.94117103374685, 35.256998764671664], [135.91916863666168, 35.26093190060774], [135.8807722966503, 35.27952490685097], [135.85316144540616, 35.27737955997675], [135.85186718675408, 35.276664444352015], [135.8307276287703, 35.27594932872727], [135.80786239258373, 35.31385045683849], [135.77680018493405, 35.33959461932912], [135.7707603112244, 35.35246670057444], [135.79362554741095, 35.38321667243825], [135.80182251887408, 35.382143999001144], [135.81519652494543, 35.40824571930415], [135.84884724989925, 35.40824571930415], [135.8553185431596, 35.39966433180727], [135.86610403192685, 35.39144050212276], [135.89500914182307, 35.403239909930974], [135.91399160205341, 35.427196283359756], [135.92477709082067, 35.48226018646473], [135.94936800520998, 35.5158706208275], [135.98733292567067, 35.48583576458842], [136.01019816185723, 35.49012645833686], [136.0334948175945, 35.5265973551986], [136.0542029560276, 35.530888048947034], [136.07404825535934, 35.52373689269964], [136.09863916974865, 35.53196072238415], [136.10640472166108, 35.528027586448076], [136.1003648479514, 35.46259450678438], [136.10640472166108, 35.45329800366276]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18446, "NAME_2": "Takatsuki", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.2742269268794, 35.48762355365027], [136.24273329967903, 35.45651602397409], [136.20433695966764, 35.45258288803802], [136.19915992505938, 35.483332859901836], [136.2146910288842, 35.49191424739871], [136.23539916731733, 35.48905378489975], [136.2487731733887, 35.49978051927086], [136.2742269268794, 35.48762355365027]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18447, "NAME_2": "Torahime", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.24834175383802, 35.4243358208608], [136.2526559493449, 35.43935324898033], [136.2828553178932, 35.446504405227735], [136.2781097028356, 35.430414303671085], [136.2910522893563, 35.41646954898866], [136.26344143811215, 35.40788816149178], [136.24834175383802, 35.4243358208608]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18448, "NAME_2": "Toyosato", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.25955866215594, 35.18620231782242], [136.22159374169524, 35.18441452876057], [136.21167109202938, 35.19549882094404], [136.22849645450628, 35.21301915375017], [136.24359613878042, 35.207298228752244], [136.25955866215594, 35.18620231782242]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18449, "NAME_2": "Yasu", "VARNAME_2": "", "HASC_2": "JP.SH.YS", "TYPE_2": "Shi", "ENGTYPE_2": "City", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.0240035874793, 35.135429108465885], [136.04428030636174, 35.10753959910103], [136.06930264030174, 35.100030885041264], [136.08353948547452, 35.087516361608316], [136.0796567095183, 35.04854256005999], [136.04643740411518, 35.02458618663121], [136.0158066160162, 35.04854256005999], [136.0067468054517, 35.058911736618725], [136.0162380355669, 35.0853710147341], [135.9950984775831, 35.111472735037104], [135.9817244715117, 35.11612098659791], [135.99380421893102, 35.140077360026694], [136.0240035874793, 35.135429108465885]]]}}, {"id": null, "ISO": "JPN", "NAME_0": "Japan", "ID_1": 1492, "NAME_1": "Shiga", "ID_2": 18450, "NAME_2": "Yogo", "VARNAME_2": "", "HASC_2": "", "TYPE_2": "Machi", "ENGTYPE_2": "Town", "type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[136.27897254193698, 35.661039092649695], [136.2819924787918, 35.634937372346684], [136.29234654800837, 35.61705948172819], [136.2655985358656, 35.59739380204785], [136.2453218169832, 35.56950429268299], [136.24618465608455, 35.545905477066576], [136.21641670708698, 35.51301015832854], [136.18664875808938, 35.50836190676773], [136.16723487830834, 35.56414092549744], [136.17974604527834, 35.593818223924146], [136.16292068280143, 35.62278040672611], [136.15342945268625, 35.6538879364023], [136.13746692931073, 35.66676001764761], [136.155155130889, 35.694291969200094], [136.18708017764007, 35.70001289419802], [136.2021798619142, 35.68678325514033], [136.27897254193698, 35.661039092649695]]]}}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If no postprocessing has been done on geometry, consider coming back to the
<code class="docutils literal notranslate"><span class="pre">topo_feature</span></code>.</p>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">default</span><span class="o">.</span><span class="n">japan</span><span class="o">.</span><span class="n">towns</span><span class="o">.</span><span class="n">topo_feature</span><span class="p">)</span>
    <span class="o">.</span><span class="n">mark_geoshape</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span>
            <span class="s2">&quot;datum.properties.ENGTYPE_2 == &#39;Water body&#39;&quot;</span><span class="p">,</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;steelblue&quot;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;#bab0ac&quot;</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;properties.NAME_2:N&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span><span class="s2">&quot;datum.properties.NAME_1 == &#39;Shiga&#39;&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="o">**</span><span class="n">JGD2000</span><span class="p">())</span>
    <span class="o">.</span><span class="n">configure_view</span><span class="p">(</span><span class="n">stroke</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-16d9c8d61cd741f2be31004200be00f7.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-16d9c8d61cd741f2be31004200be00f7.vega-embed details,
  #altair-viz-16d9c8d61cd741f2be31004200be00f7.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-16d9c8d61cd741f2be31004200be00f7"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-16d9c8d61cd741f2be31004200be00f7") {
      outputDiv = document.getElementById("altair-viz-16d9c8d61cd741f2be31004200be00f7");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}}, "data": {"url": "https://raw.githubusercontent.com/xoolive/topojson/master/countries/japan/jp-towns.json", "format": {"feature": "JPN_adm2", "type": "topojson"}}, "mark": {"type": "geoshape", "stroke": "white"}, "encoding": {"color": {"condition": {"test": "datum.properties.ENGTYPE_2 == 'Water body'", "value": "steelblue"}, "value": "#bab0ac"}, "tooltip": {"field": "properties.NAME_2", "type": "nominal"}}, "height": 400, "projection": {"rotate": [-139.833333333333, -36, 0], "type": "transverseMercator"}, "transform": [{"filter": "datum.properties.NAME_1 == 'Shiga'"}], "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.17.0.json"}, {"mode": "vega-lite"});
</script></div></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note how the <code class="docutils literal notranslate"><span class="pre">.query()</span></code> becomes a <code class="docutils literal notranslate"><span class="pre">.transform_filter()</span></code> and how feature
names are then prefixed with <code class="docutils literal notranslate"><span class="pre">properties.</span></code></p>
</div>
</section>
<section id="tricks-for-filtering">
<h2>Tricks for filtering<a class="headerlink" href="#tricks-for-filtering" title="Link to this heading"></a></h2>
<ul>
<li><p>A final <code class="docutils literal notranslate"><span class="pre">_</span></code> in a filtering attribute negates it:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartes.atlas</span> <span class="kn">import</span> <span class="n">world</span>

<span class="n">world</span><span class="o">.</span><span class="n">countries</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>download_url</th>
      <th>type</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7</th>
      <td>world-countries-sans-antarctica.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>109244</td>
    </tr>
    <tr>
      <th>8</th>
      <td>world-countries.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>115340</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">world</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">sans_</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>download_url</th>
      <th>type</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8</th>
      <td>world-countries.json</td>
      <td>https://raw.githubusercontent.com/xoolive/topo...</td>
      <td>file</td>
      <td>115340</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</li>
<li><p>An attribute starting with a number yields a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>. Use the <code class="docutils literal notranslate"><span class="pre">_</span></code> prefix:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartes.atlas</span> <span class="kn">import</span> <span class="n">world_atlas</span>

<span class="n">world_atlas</span><span class="o">.</span><span class="n">countries</span><span class="o">.</span><span class="n">_10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>hash</th>
      <th>size</th>
      <th>download_url</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>countries-10m.json</td>
      <td>O8bx02epvOxHmEG64OdgkvUSg4QR0M7xJOku7E20X3k=</td>
      <td>3661071</td>
      <td>https://cdn.jsdelivr.net/npm/world-atlas@2.0.2...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>countries-110m.json</td>
      <td>JRbJFYZ8e68Y3exyeuxGwxVUGgfPs9eaZVmwXV6U7ug=</td>
      <td>107761</td>
      <td>https://cdn.jsdelivr.net/npm/world-atlas@2.0.2...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you can’t find a work-around a special argument, try the <code class="docutils literal notranslate"><span class="pre">.q()</span></code> method
and forget about <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">world_atlas</span><span class="o">.</span><span class="n">q</span><span class="p">(</span><span class="s2">&quot;countries&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">q</span><span class="p">(</span><span class="s2">&quot;-10&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>path</th>
      <th>hash</th>
      <th>size</th>
      <th>download_url</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>countries-10m.json</td>
      <td>O8bx02epvOxHmEG64OdgkvUSg4QR0M7xJOku7E20X3k=</td>
      <td>3661071</td>
      <td>https://cdn.jsdelivr.net/npm/world-atlas@2.0.2...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="projections.html" class="btn btn-neutral float-left" title="CRS and projections" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="osm.html" class="btn btn-neutral float-right" title="OpenStreetMap" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Xavier Olive.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<!-- Google tag (gtag.js) -->
<script async
    src="https://www.googletagmanager.com/gtag/js?id=G-S76SFPX8CV"></script>
    <script>
          window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-S76SFPX8CV');
    </script>

<!-- Remove hard-coded borders on pandas dataframes -->
<script>
  const elements = document.getElementsByClassName("dataframe");
  for (let i = 0; i < elements.length; i++) {
    const elt = elements[i];
    elt.setAttribute("border", 0);
  }
</script>



</body>
</html>