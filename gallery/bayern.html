<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>License plate codes in Bavaria &mdash; Cartes 0.7.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
      <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Fira Sans|Ubuntu:regular,bold&subset=Latin&display=swap" />
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto Sans JP:thin,regular,bold&display=swap" />
      <link rel="stylesheet" type="text/css" href="../_static/main_stylesheet.css?v=ee88ba8d" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=35f4697d"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/thebelab-helper.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager/dist/embed-amd.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tokyo metro map" href="tokyo_metro.html" />
    <link rel="prev" title="Swiss cantons" href="switzerland.html" /> 
</head>

<body class="wy-body-for-nav">
<!-- force the fonts to be put in cache in advance -->
<div id="ubuntu">Ubuntu <b>bold</b></div>
<div id="fontin">Fontin Sans <b>bold</b></div>
<div id="notojp">東京都</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Cartes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projections.html">CRS and projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../atlas.html">Atlas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osm.html">OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualisation.html">Data visualisation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../gallery.html">Example gallery</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#basic-examples">Basic examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../gallery.html#advanced-examples">Advanced examples</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">License plate codes in Bavaria</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-acquisition">Data acquisition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-preprocessing">Data preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-visualisation">Data visualisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coats-of-arms">Coats of arms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tokyo_metro.html">Tokyo metro map</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alternatives.html">Alternative libraries</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cartes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../gallery.html">Example gallery</a></li>
      <li class="breadcrumb-item active">License plate codes in Bavaria</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/gallery/bayern.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="license-plate-codes-in-bavaria">
<h1>License plate codes in Bavaria<a class="headerlink" href="#license-plate-codes-in-bavaria" title="Link to this heading"></a></h1>
<p>License plates on cars in Germany start with a one, two or three letter codes  corresponding (roughly) to small administrative circonscriptions. The keyword for Wikipedia is <a class="reference external" href="https://de.wikipedia.org/wiki/Liste_der_Kfz-Kennzeichen_in_Deutschland">Kfz-Kennzeichen</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A more comprehensive map with coats of arms is constructed in the <a class="reference external" href="#coats-of-arms">corresponding section</a>.</p>
</div>
<div id="bayern"></div>

<script type="text/javascript">
  var spec = "../_static/gallery/bayern.json";
  vegaEmbed('#bayern', spec)
  .then(result => console.log(result))
  .catch(console.warn);
</script><section id="data-acquisition">
<h2>Data acquisition<a class="headerlink" href="#data-acquisition" title="Link to this heading"></a></h2>
<p>Download all district (<cite>Kreisen</cite>) borders for Bavaria (Bayern in German)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartes.osm</span> <span class="kn">import</span> <span class="n">Overpass</span>

<span class="n">bayern</span> <span class="o">=</span> <span class="n">Overpass</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
    <span class="c1"># There are other ways to select Bavaria, esp. with name.</span>
    <span class="c1"># ISO codes are reliable though</span>
    <span class="n">area</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ISO3166-2&quot;</span><span class="p">:</span> <span class="s2">&quot;DE-BY&quot;</span><span class="p">,</span> <span class="s2">&quot;admin_level&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="p">},</span>
    <span class="n">rel</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;boundary&quot;</span><span class="p">:</span> <span class="s2">&quot;administrative&quot;</span><span class="p">,</span> <span class="s2">&quot;admin_level&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="data-preprocessing">
<h2>Data preprocessing<a class="headerlink" href="#data-preprocessing" title="Link to this heading"></a></h2>
<p>Simplify the borders for all districts and assign colours so that no two neighbouring districts get the same colour.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1st step: simplify the borders</span>
<span class="c1"># 2nd step: assign a color using graph coloring</span>
<span class="n">bayern</span> <span class="o">=</span> <span class="n">bayern</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="mf">5e3</span><span class="p">)</span><span class="o">.</span><span class="n">coloring</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="data-visualisation">
<h2>Data visualisation<a class="headerlink" href="#data-visualisation" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>

<span class="n">bayern_chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">bayern</span><span class="p">)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span>
    <span class="n">bayern_chart</span><span class="o">.</span><span class="n">mark_geoshape</span><span class="p">()</span>
    <span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">&quot;coloring:N&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;name:N&quot;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">),</span>
    <span class="n">bayern_chart</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">font</span><span class="o">=</span><span class="s2">&quot;Ubuntu&quot;</span><span class="p">,</span> <span class="n">fontSize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Latitude</span><span class="p">(</span><span class="s2">&quot;latitude:Q&quot;</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Longitude</span><span class="p">(</span><span class="s2">&quot;longitude:Q&quot;</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s2">&quot;license_plate_code:N&quot;</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;name:N&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="c1"># do not display empty data</span>
    <span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span><span class="s2">&quot;datum.license_plate_code != null&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="coats-of-arms">
<h2>Coats of arms<a class="headerlink" href="#coats-of-arms" title="Link to this heading"></a></h2>
<div id="bayern_wappen"></div>

<script type="text/javascript">
  var spec = "../_static/gallery/bayern_wappen.json";
  vegaEmbed('#bayern_wappen', spec)
  .then(result => console.log(result))
  .catch(console.warn);
</script><p>The first map shows one main issue: only <cite>Landkreis</cite> display a license plate code, not cities outside a <cite>Kreis</cite> (<cite>Kreisfreie Stadt</cite>).</p>
<p>Since the data returned by OpenStreetMap contains a Wikidata identifier, we use it to fill the missing information. Since the whole process involves many small downloads which can be run in parallel, we use in the following example the asynchronous library <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> rather than the popular “blocking” <code class="docutils literal notranslate"><span class="pre">requests</span></code> library.</p>
<p>Wikidata returns comprehensive information in JSON format, with popular fields encoded with identifiers. We focus here on:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">P394</span></code>: licence plate code;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">P94</span></code>: coat of arms (just because it’s beautiful).</p></li>
</ul>
<p>The following code gets all the necessary complementary information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">aiohttp</span>
<span class="kn">import</span> <span class="nn">bs4</span>  <span class="c1"># beautifulsoup4</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span><span class="n">wikidata</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;https://www.wikidata.org/wiki/Special:EntityData/</span><span class="si">{</span><span class="n">wikidata</span><span class="si">}</span><span class="s2">.json&quot;</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">resp</span><span class="p">:</span>
        <span class="n">json</span> <span class="o">=</span> <span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="c1"># The licence plate code</span>
    <span class="n">p395</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">elt</span><span class="p">[</span><span class="s2">&quot;mainsnak&quot;</span><span class="p">][</span><span class="s2">&quot;datavalue&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">json</span><span class="p">[</span><span class="s2">&quot;entities&quot;</span><span class="p">][</span><span class="n">wikidata</span><span class="p">][</span><span class="s2">&quot;claims&quot;</span><span class="p">][</span><span class="s2">&quot;P395&quot;</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="c1"># Some districts have several official licence plate codes</span>
    <span class="c1"># Then the second looks more natural if we have to pick one</span>
    <span class="n">result</span><span class="p">[</span><span class="s2">&quot;P395&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p395</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p395</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">p395</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># The name of the SVG file for the coat of arms</span>
    <span class="n">p94</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
        <span class="n">elt</span><span class="p">[</span><span class="s2">&quot;mainsnak&quot;</span><span class="p">][</span><span class="s2">&quot;datavalue&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">json</span><span class="p">[</span><span class="s2">&quot;entities&quot;</span><span class="p">][</span><span class="n">wikidata</span><span class="p">][</span><span class="s2">&quot;claims&quot;</span><span class="p">][</span><span class="s2">&quot;P94&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># The full path to the SVG file is to be found on that page</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://commons.wikimedia.org/wiki/File:</span><span class="si">{</span><span class="n">p94</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">resp</span><span class="p">:</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="n">svg_link</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;https://.*\.svg$&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">svg_link</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;P94&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">svg_link</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">result</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">wikidata</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">futures</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="n">fetch</span><span class="p">(</span><span class="n">elt</span><span class="o">.</span><span class="n">wikidata</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">bayern</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">result</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">futures</span><span class="p">))</span>


<span class="n">records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">wikidata</span><span class="p">()</span>  <span class="c1"># only valid in notebooks, otherwise asyncio.run(main())</span>

<span class="n">bayern_complete</span> <span class="o">=</span> <span class="n">bayern</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">bayern</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">id_</span><span class="p">),</span>
    <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;id_&quot;</span><span class="p">,</span>
    <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Then we can build the full map:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bayern_chart</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">bayern_complete</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection_single</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s2">&quot;mouseover&quot;</span><span class="p">,</span> <span class="n">nearest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span>
    <span class="c1"># Same background map</span>
    <span class="n">bayern_chart</span><span class="o">.</span><span class="n">mark_geoshape</span><span class="p">()</span>
    <span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">&quot;coloring:N&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;name:N&quot;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">),</span>
    <span class="c1"># The text is now taken from P395 when not available</span>
    <span class="n">bayern_chart</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">font</span><span class="o">=</span><span class="s2">&quot;Ubuntu&quot;</span><span class="p">,</span> <span class="n">fontSize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s2">&quot;display:N&quot;</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;name:N&quot;</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Latitude</span><span class="p">(</span><span class="s2">&quot;latitude:Q&quot;</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Longitude</span><span class="p">(</span><span class="s2">&quot;longitude:Q&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">transform_calculate</span><span class="p">(</span>
        <span class="c1"># The switch happens here</span>
        <span class="n">display</span><span class="o">=</span><span class="p">(</span>
            <span class="s2">&quot;if(isValid(datum.license_plate_code), &quot;</span>
            <span class="s2">&quot;datum.license_plate_code, datum.P395)&quot;</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">add_selection</span><span class="p">(</span><span class="n">selector</span><span class="p">),</span>
    <span class="c1"># We place a map on the top right corner, according to the selected text</span>
    <span class="n">bayern_chart</span><span class="o">.</span><span class="n">mark_image</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;line-top&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">alt</span><span class="o">.</span><span class="n">Url</span><span class="p">(</span><span class="s2">&quot;P94:N&quot;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span><span class="n">selector</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="switzerland.html" class="btn btn-neutral float-left" title="Swiss cantons" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tokyo_metro.html" class="btn btn-neutral float-right" title="Tokyo metro map" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Xavier Olive.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<!-- Google tag (gtag.js) -->
<script async
    src="https://www.googletagmanager.com/gtag/js?id=G-S76SFPX8CV"></script>
    <script>
          window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-S76SFPX8CV');
    </script>

<!-- Remove hard-coded borders on pandas dataframes -->
<script>
  const elements = document.getElementsByClassName("dataframe");
  for (let i = 0; i < elements.length; i++) {
    const elt = elements[i];
    elt.setAttribute("border", 0);
  }
</script>



</body>
</html>